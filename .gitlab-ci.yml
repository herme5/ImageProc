variables:
  LC_ALL: "en_US.UTF-8" # Needed for xcpretty to work

stages:
  - lint
  - test

Run Linter:
  stage: lint
  script: pod spec lint ImageProc.podspec

Run Tests:
  stage: test
  parallel:
    matrix:
      - DESTINATION:
        - 'platform=iOS Simulator,name=iPad (10th generation)'
        - 'platform=iOS Simulator,name=iPhone 14'
  script:
    - xcodebuild clean -project ImageProc.xcodeproj -scheme ImageProc | xcpretty
    - xcodebuild test -project ImageProc.xcodeproj -scheme ImageProcTests -destination "$DESTINATION" | xcpretty -s
